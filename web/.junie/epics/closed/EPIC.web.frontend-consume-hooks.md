## EPIC: Frontend — Consume & Show Data via Generated Hooks

*Turn the Next.js Control Panel from a proof-of-concept into a functional GPU-insights dashboard.*

---

### 🧠 Overview

The backend now exposes rich, typed DTOs and the autogenerated TanStack hooks are ready for use.  
This epic drives the **first data-driven release** of the control-panel UI:

* fetch live listings / reports through `@client/hooks`
* render ergonomic tables & cards with sorting / filtering
* lay the groundwork for future “deep-dive” pages (per-model trends, price history, etc.)

---

### 📦 Current State

| Area                   | Status                                      |
|------------------------|---------------------------------------------|
| Navigation / layout    | ✅  Navbar + `Home`/`Reports`/`About` routes |
| Generated client       | ✅  `pnpm run codegen` works                 |
| Basic health demo      | ✅  `useHealthCheck` hook + banner           |
| Playwright integration | ✅  health + navbar + empty-reports tests    |
| Listings & reports API | ⚠️  client hooks generated but **unused**   |
| UI kit (`@ui`)         | 🟡  minimal (Button, Card, Code)            |

---

### 🛠 Constraints

* **Hooks first** – no raw `fetch`; always import from `@client/hooks` (or wrappers).
* **Dark-light ready** – prefer Tailwind utility classes that work in both themes.
* **No inline style hacks** – compose with shadcn/ui primitives.
* **Persistence** – do *not* store fetched data in localStorage yet; stick to SWR caching.
* **Tests** – every new page/component gets:
    * Vitest unit test for rendering / hook logic
    * Playwright spec under `tests/integration/` if it touches routing or API

---

### 🔭 Strategic Roadmap

| # | Task ID                                       | Goal                                                                              |
|---|-----------------------------------------------|-----------------------------------------------------------------------------------|
| 1 | **TASK.web.07.client.wrap-listings-endpoint** | Export `useListings` hook (pagination, date filters).                             |
| 2 | **TASK.web.08.ui.render-listings-table**      | `/listings` page with searchable, sortable table (HeadlessUI + shadcn Table).     |
| 3 | **TASK.web.09.client.wrap-models-endpoint**   | Hook for `/models` → fuel dropdowns & metadata tooltips.                          |
| 4 | **TASK.web.10.enhance-reports-view**          | Replace placeholder alert with real data grid (utility score, price/GB, etc.).    |
| 5 | **TASK.web.11.add-loading-and-error-states**  | Global `Skeleton` + `ErrorBanner` components; integrate into every hook consumer. |
| 6 | **TASK.web.12.visual-regression-tests**       | Add Playwright snapshot tests for `/` and `/reports`.                             |
| 7 | **TASK.web.13.docs.contributing-frontend**    | Short README section: dev workflow, `safe-run.sh`, testing commands.              |

*(Tasks continue the existing numbering to avoid ID collision.)*

---

### 🚀 Milestone Definition

**MVP shipped** when:

1. `/reports` renders at least 100 rows from live API in < 1 s on localhost.
2. Column headers sort; free-text filter narrows results.
3. Playwright suite passes on CI with Docker stack.
4. Lighthouse perf > 90 mobile.
5. Docs updated; `README > Frontend Dev` section explains all commands.

---

### 📈 Stretch Ideas

* **Infinite scroll** for listings.
* **Charts-as-you-scroll**: embed a tiny price-history sparkline per row using `react-plot`.
* **Theme toggle** wired to shadcn/ui config.
* **Skeleton generator** – leverage TanStack’s `isFetching` to blur existing rows while updating.

---

### 🔧 Dev Commands

```bash
# Hot-reload frontend + backend (Docker):
./.junie/scripts/docker-stack.sh up

# Unit tests only:
pnpm --filter controlpanel test:unit

# Integration tests (requires running stack):
pnpm --filter controlpanel test:e2e

# Regenerate client + hooks when backend schema changes:
pnpm --filter @client codegen
```

✅ Acceptance Checklist
•	All new pages behind routes /listings, /reports compile & load.
•	No ESLint or Prettier errors (pnpm lint).
•	pnpm build --filter controlpanel succeeds without warnings.
•	Playwright run green in CI pipeline.
•	Epic tasks moved to .junie/tasks/closed/ with summaries.

“If we can’t see the data, we can’t tame the GPUs.” – Dr. J.A.R. Weber, CASM 🦾