## EPIC: Frontend â€” Consume & Show Data via Generated Hooks

*Turn the Next.js Control Panel from a proof-of-concept into a functional GPU-insights dashboard.*

---

### ğŸ§  Overview

The backend now exposes rich, typed DTOs and the autogenerated TanStack hooks are ready for use.  
This epic drives the **first data-driven release** of the control-panel UI:

* fetch live listings / reports through `@client/hooks`
* render ergonomic tables & cards with sorting / filtering
* lay the groundwork for future â€œdeep-diveâ€ pages (per-model trends, price history, etc.)

---

### ğŸ“¦ Current State

| Area                   | Status                                      |
|------------------------|---------------------------------------------|
| Navigation / layout    | âœ…  Navbar + `Home`/`Reports`/`About` routes |
| Generated client       | âœ…  `pnpm run codegen` works                 |
| Basic health demo      | âœ…  `useHealthCheck` hook + banner           |
| Playwright integration | âœ…  health + navbar + empty-reports tests    |
| Listings & reports API | âš ï¸  client hooks generated but **unused**   |
| UI kit (`@ui`)         | ğŸŸ¡  minimal (Button, Card, Code)            |

---

### ğŸ›  Constraints

* **Hooks first** â€“ no raw `fetch`; always import from `@client/hooks` (or wrappers).
* **Dark-light ready** â€“ prefer Tailwind utility classes that work in both themes.
* **No inline style hacks** â€“ compose with shadcn/ui primitives.
* **Persistence** â€“ do *not* store fetched data in localStorage yet; stick to SWR caching.
* **Tests** â€“ every new page/component gets:
    * Vitest unit test for rendering / hook logic
    * Playwright spec under `tests/integration/` if it touches routing or API

---

### ğŸ”­ Strategic Roadmap

| # | Task ID                                       | Goal                                                                              |
|---|-----------------------------------------------|-----------------------------------------------------------------------------------|
| 1 | **TASK.web.07.client.wrap-listings-endpoint** | Export `useListings` hook (pagination, date filters).                             |
| 2 | **TASK.web.08.ui.render-listings-table**      | `/listings` page with searchable, sortable table (HeadlessUI + shadcn Table).     |
| 3 | **TASK.web.09.client.wrap-models-endpoint**   | Hook for `/models` â†’ fuel dropdowns & metadata tooltips.                          |
| 4 | **TASK.web.10.enhance-reports-view**          | Replace placeholder alert with real data grid (utility score, price/GB, etc.).    |
| 5 | **TASK.web.11.add-loading-and-error-states**  | Global `Skeleton` + `ErrorBanner` components; integrate into every hook consumer. |
| 6 | **TASK.web.12.visual-regression-tests**       | Add Playwright snapshot tests for `/` and `/reports`.                             |
| 7 | **TASK.web.13.docs.contributing-frontend**    | Short README section: dev workflow, `safe-run.sh`, testing commands.              |

*(Tasks continue the existing numbering to avoid ID collision.)*

---

### ğŸš€ Milestone Definition

**MVP shipped** when:

1. `/reports` renders at least 100 rows from live API in < 1 s on localhost.
2. Column headers sort; free-text filter narrows results.
3. Playwright suite passes on CI with Docker stack.
4. Lighthouse perf > 90 mobile.
5. Docs updated; `README > Frontend Dev` section explains all commands.

---

### ğŸ“ˆ Stretch Ideas

* **Infinite scroll** for listings.
* **Charts-as-you-scroll**: embed a tiny price-history sparkline per row using `react-plot`.
* **Theme toggle** wired to shadcn/ui config.
* **Skeleton generator** â€“ leverage TanStackâ€™s `isFetching` to blur existing rows while updating.

---

### ğŸ”§ Dev Commands

```bash
# Hot-reload frontend + backend (Docker):
./.junie/scripts/docker-stack.sh up

# Unit tests only:
pnpm --filter controlpanel test:unit

# Integration tests (requires running stack):
pnpm --filter controlpanel test:e2e

# Regenerate client + hooks when backend schema changes:
pnpm --filter @client codegen
```

âœ… Acceptance Checklist
â€¢	All new pages behind routes /listings, /reports compile & load.
â€¢	No ESLint or Prettier errors (pnpm lint).
â€¢	pnpm build --filter controlpanel succeeds without warnings.
â€¢	Playwright run green in CI pipeline.
â€¢	Epic tasks moved to .junie/tasks/closed/ with summaries.

â€œIf we canâ€™t see the data, we canâ€™t tame the GPUs.â€ â€“ Dr. J.A.R. Weber, CASM ğŸ¦¾